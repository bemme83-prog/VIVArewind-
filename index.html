<!DOCTYPE html>
<html lang="de">
<head>
    <meta charset="UTF-8">
    <title>VIVA - HEARTBEAT 18:45</title>
    <style>
        body { background: #000; color: #fff; font-family: sans-serif; margin: 0; overflow: hidden; }
        #player { position: absolute; inset: 0; pointer-events: none; }
        #overlay { position: fixed; inset: 0; z-index: 1000; background: #000; display: flex; justify-content: center; align-items: center; cursor: pointer; }
        
        /* Herzschlag-Punkt zur Kontrolle */
        #heartbeat { 
            position: absolute; top: 20px; left: 20px; width: 15px; height: 15px; 
            background: red; border-radius: 50%; z-index: 2000; 
            animation: beat 1s infinite; 
        }
        @keyframes beat { from { opacity: 1; } to { opacity: 0.2; } }
        
        #status { position: absolute; top: 20px; left: 50px; z-index: 2000; color: #0f0; }
    </style>
</head>
<body>

<div id="heartbeat"></div>
<div id="status">Script aktiv - Warte auf Start...</div>

<div id="overlay" onclick="powerOn()"><h1>START HEARTBEAT</h1></div>
<div id="player"></div>

<script src="https://www.youtube.com/iframe_api"></script>
<script>
    let player;
    let mode = 'MUSIC';
    let counter = 45; // Wir wechseln starr alle 45 Sekunden

    function onYouTubeIframeAPIReady() {
        player = new YT.Player('player', {
            height: '100%', width: '100%',
            playerVars: { autoplay: 1, controls: 0, modestbranding: 1, rel: 0, playsinline: 1, enablejsapi: 1 },
            events: { 'onReady': () => console.log("Ready") }
        });
    }

    function startStaticTimer() {
        setInterval(() => {
            counter--;
            document.getElementById('status').innerText = "WECHSEL IN: " + counter + "s | MODE: " + mode;
            
            if (counter <= 0) {
                doSwitch();
                counter = 45; // Reset auf 45s
            }
        }, 1000);
    }

    function doSwitch() {
        mode = (mode === 'MUSIC') ? 'VIVA' : 'MUSIC';
        if (mode === 'VIVA') {
            player.loadVideoById('h07xiwYGLvs');
        } else {
            player.loadPlaylist({
                list: 'PLfYJatUfKgnlRa5IM0KI_ll0UyhYItnU2',
                listType: 'playlist',
                index: Math.floor(Math.random() * 50)
            });
        }
    }

    function powerOn() {
        document.getElementById('overlay').style.display = 'none';
        player.unMute();
        doSwitch();
        startStaticTimer();
    }
</script>
</body>
</html>
