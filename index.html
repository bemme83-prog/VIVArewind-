<!DOCTYPE html>
<html lang="de">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>VIVArewind - Professional</title>
    <style>
        body, html { margin: 0; padding: 0; width: 100%; height: 100%; background: #000; overflow: hidden; font-family: 'Arial Black', sans-serif; color: white; }
        
        /* Video Container */
        #tv-screen { position: relative; width: 100vw; height: 100vh; background: #000; overflow: hidden; }
        #player { position: absolute; top: 50%; left: 50%; transform: translate(-50%, -50%) scale(1.3); width: 100%; height: 100%; pointer-events: none; }

        /* CRT Scanlines & Vignette (MTVrewind Style) */
        #overlay {
            position: absolute; top: 0; left: 0; width: 100%; height: 100%;
            background: radial-gradient(circle, rgba(0,0,0,0) 60%, rgba(0,0,0,0.7) 100%),
                        linear-gradient(rgba(18, 16, 16, 0) 50%, rgba(0, 0, 0, 0.2) 50%);
            background-size: 100% 100%, 100% 4px; z-index: 10; pointer-events: none;
        }

        /* VIVA LOGO - Rechts Oben */
        #viva-logo {
            position: absolute; top: 30px; right: 40px; width: 100px; height: auto;
            z-index: 20; opacity: 0.7; filter: drop-shadow(0 0 10px rgba(0,0,0,0.5));
        }

        /* Bauchbinde */
        #song-info {
            position: absolute; bottom: 15%; left: 0; z-index: 30;
            background: linear-gradient(90deg, #ff00ff 0%, #00ffff 100%);
            padding: 10px 40px; transform: translateX(-110%); transition: transform 0.5s cubic-bezier(0.175, 0.885, 0.32, 1.275);
            box-shadow: 10px 10px 0px #000;
        }
        #song-info.active { transform: translateX(0); }

        /* Steuerung (Smart Bar) */
        #remote-control {
            position: absolute; bottom: 0; width: 100%; height: 100px;
            background: linear-gradient(transparent, rgba(0,0,0,0.9));
            z-index: 100; display: flex; justify-content: center; align-items: center;
            opacity: 0; transition: opacity 0.4s;
        }
        #tv-screen:hover #remote-control, #tv-screen:active #remote-control { opacity: 1; }
        
        .nav-btn {
            background: rgba(255,255,255,0.1); border: 2px solid white; color: white;
            padding: 15px 30px; margin: 0 10px; border-radius: 5px; font-size: 14px;
            text-transform: uppercase; cursor: pointer;
        }

        /* Start Screen */
        #power-button {
            position: fixed; top: 0; left: 0; width: 100%; height: 100%;
            background: #111; z-index: 200; display: flex; flex-direction: column;
            justify-content: center; align-items: center; cursor: pointer;
        }
    </style>
</head>
<body>

<div id="power-button" onclick="turnOn()">
    <div style="border: 5px solid #ff00ff; padding: 30px; border-radius: 100px;">
        <h1 style="color: #ff00ff; margin: 0; font-size: 40px;">VIVA</h1>
    </div>
    <p style="margin-top: 20px; letter-spacing: 5px; color: #555;">TOUCH TO POWER ON</p>
</div>

<div id="tv-screen">
    <div id="player"></div>
    <div id="overlay"></div>
    
    <img id="viva-logo" src="https://upload.wikimedia.org/wikipedia/commons/e/e3/VIVA_Logo.svg">
    
    <div id="song-info">
        <div id="artist" style="font-size: 14px; opacity: 0.8;"></div>
        <div id="title" style="font-size: 22px; text-transform: uppercase;"></div>
    </div>

    <div id="remote-control">
        <button class="nav-btn" onclick="zapBack()">◀ LAST</button>
        <button class="nav-btn" onclick="zapNext()">NEXT ▶</button>
    </div>
</div>

<script>
    let musicVideos = [];
    let player;
    let history = [];

    // Datenbank laden
    fetch('musicVideos.json')
        .then(r => r.json())
        .then(data => { musicVideos = data; })
        .catch(() => { 
            // Minimales Fallback falls JSON fehlt
            musicVideos = [{id: '_T9Y0o4R_qM', artist: 'Lucilectric', title: 'Mädchen'}]; 
        });

    function onYouTubeIframeAPIReady() {
        player = new YT.Player('player', {
            height: '100%', width: '100%',
            videoId: 'z5od8_Gp1ig', // Start mit Ident
            playerVars: { 
                'autoplay': 0, 'controls': 0, 'mute': 1, 
                'playsinline': 1, 'rel': 0, 'modestbranding': 1 
            },
            events: {
                'onStateChange': (e) => { 
                    if (e.data === YT.PlayerState.ENDED) zapNext(); 
                }
            }
        });
    }

    function turnOn() {
        document.getElementById('power-button').style.display = 'none';
        player.unMute();
        player.setVolume(100);
        zapNext();
    }

    function zapNext() {
        if (musicVideos.length === 0) return;
        const next = musicVideos[Math.floor(Math.random() * musicVideos.length)];
        history.push(next);
        playVideo(next);
    }

    function zapBack() {
        if (history.length > 1) {
            history.pop(); // Aktuelles entfernen
            const last = history.pop();
            playVideo(last);
        }
    }

    function playVideo(video) {
        player.loadVideoById(video.id);
        
        const info = document.getElementById('song-info');
        if (video.artist !== "VIVA") {
            document.getElementById('artist').innerText = video.artist;
            document.getElementById('title').innerText = video.title;
            
            setTimeout(() => {
                info.classList.add('active');
                setTimeout(() => info.classList.remove('active'), 8000);
            }, 3000);
        }
    }
</script>
<script src="https://www.youtube.com/iframe_api"></script>
</body>
</html>
