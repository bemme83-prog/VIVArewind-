<script>
    // ... (Variablen wie zuvor) ...

    function onYouTubeIframeAPIReady() {
        const commonVars = { autoplay: 0, controls: 0, modestbranding: 1, rel: 0, iv_load_policy: 3, enablejsapi: 1 };

        playerMusic = new YT.Player('player-music', {
            height: '100%', width: '100%',
            playerVars: commonVars,
            events: { 
                'onStateChange': (e) => {
                    if (e.data === YT.PlayerState.PLAYING) mode = 'MUSIC';
                    if (e.data === YT.PlayerState.ENDED && mode === 'MUSIC') zapToInter();
                },
                'onError': (e) => {
                    // FEHLER: Video nicht verfügbar / GEMA / Gelöscht
                    console.error("Musik-Fehler erkannt: " + e.data);
                    document.getElementById('status-box').innerText = "VIDEO DEFEKT - SKIP...";
                    
                    // Kurze Pause, dann nächsten Song aus Playlist laden
                    setTimeout(() => {
                        zapToMusic(); 
                    }, 1000);
                }
            }
        });

        playerInter = new YT.Player('player-inter', {
            height: '100%', width: '100%',
            playerVars: commonVars,
            events: { 
                'onStateChange': (e) => {
                    if (e.data === YT.PlayerState.PLAYING && isPreloading) {
                        playerInter.pauseVideo();
                        isPreloading = false;
                        interReady = true;
                        document.getElementById('status-box').innerText = "EINSPIELER: BEREIT";
                    }
                    if (e.data === YT.PlayerState.ENDED && mode === 'INTER') zapToMusic();
                },
                'onError': (e) => {
                    console.error("Einspieler-Fehler: " + e.data);
                    // Falls Einspieler kaputt, sofort Reset, damit Watchdog neuen sucht
                    isPreloading = false;
                    interReady = false;
                    document.getElementById('status-box').innerText = "EINSPIELER DEFEKT - SUCHE NEUEN...";
                }
            }
        });
    }

    // ... (Watchdog und Zap-Funktionen wie zuvor) ...
</script>
